<div class="h-[calc(100vh-4rem)] grid grid-cols-2">
  <div class="p-6 bg-white rounded-lg shadow-lg m-6 h-full relative">
    <h2 class="text-2xl font-bold">
      Let's kamalify your app!
    </h2>
    <p class="text-gray-700 text-sm mb-4">
      Fill the form below to generate a Kamal configuration file for your application.
    </p>

    <%= form_with url: yaml_preview_path, method: :get, data: { controller: "autosubmit", action: "input->autosubmit#submit", turbo_frame: "yaml_preview" } do |f| %>
      <div class="border-b border-gray-900/10 p-6">
        <div class="mb-4">
          <%= f.label :name, "Service name:", class: "block text-sm font-medium text-gray-700 mb-1" %>
          <%= f.text_field :name,
            placeholder: "your_service",
            class: "w-full px-4 py-2 border border-gray-300 text-base rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-gray-700 placeholder-gray-400 transition duration-200" %>
        </div>

        <div class="mb-4">
          <%= f.label :docker_image, "Docker image:", class: "block text-sm font-medium text-gray-700 mb-1" %>
          <%= f.text_field :docker_image,
            placeholder: "image/your_service",
            class: "w-full px-4 py-2 border border-gray-300 text-base rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-gray-700 placeholder-gray-400 transition duration-200" %>
        </div>

        <div class="mb-4">
          <%= f.label :server, "Server IP address:", class: "block text-sm font-medium text-gray-700 mb-1" %>
          <%= f.text_field :server,
            placeholder: "192.168.0.1",
            class: "w-full px-4 py-2 border border-gray-300 text-base rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-gray-700 placeholder-gray-400 transition duration-200" %>
        </div>

        <div class="mb-4">
          <%= f.label :arch, "Architecture:", class: "block text-sm font-medium text-gray-700 mb-1" %>
          <%= f.select :arch, ["amd64", "arm64"], {}, class: "bg-white border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5" %>
        </div>

        <fieldset class="mb-4 bg-gray-50 border border-gray-300 p-6 rounded-lg">
          <legend class="block text-sm font-medium text-gray-700">
            <span class="text-gray-700">Registry</span>
          </legend>
          <div class="space-y-4">
            <% ['username', 'password'].each do |key, value| %>
              <div class="flex items-center">
                <div class="flex-1">
                  <%= f.label key, value, class: "block text-sm font-medium text-gray-700 mb-1" %>
                </div>
                <div class="flex-1 flex items-center">
                  <%= f.text_field key, class: "w-full px-4 py-2 bg-white border border-gray-300 text-base rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-gray-700 placeholder-gray-400 transition duration-200" %>
                </div>
              </div>
            <% end %>
          </div>
        </fieldset>
      </div>
    <% end %>

    <p class="absolute bottom-4 right-4 text-xs flex items-center">
      <span> Made with ❤️ by <a href="https://unagisoftware.com" target="_blank" class="text-[#ff5e2c]">Unagi</a> </span>
    </p>
  </div>

  <div class="h-full bg-[#282c34] m-6 flex flex-col justify-between rounded-lg shadow-lg p-6">
    <%= turbo_frame_tag "yaml_preview", src: yaml_preview_path, loading: :lazy %>

    <div class="text-sm flex gap-5 justify-end">
      <%= copy_button %>
      <%= download_button %>
    </div>
  </div>
</div>
